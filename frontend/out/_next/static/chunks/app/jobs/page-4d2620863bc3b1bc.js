(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[531],{887:(e,r,a)=>{Promise.resolve().then(a.bind(a,2377))},968:(e,r,a)=>{"use strict";a.d(r,{b:()=>l});var t=a(2115),s=a(3655),d=a(5155),n=t.forwardRef((e,r)=>(0,d.jsx)(s.sG.label,{...e,ref:r,onMouseDown:r=>{var a;r.target.closest("button, input, select, textarea")||(null===(a=e.onMouseDown)||void 0===a||a.call(e,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));n.displayName="Label";var l=n},1886:(e,r,a)=>{"use strict";a.d(r,{K:()=>l});var t=a(9509);let s=["pending_code_review","job_run_failed"],d=["shared","approved","job_run_finished"],n=()=>t.env.NEXT_PUBLIC_API_URL||"",l={async getDatasets(){let e=await fetch("".concat(n(),"/api/v1/datasets"));return{datasets:(await e.json()).datasets.map(e=>({id:e.uid,name:e.name,description:e.summary,size:"1.8 MB",type:e.name.split(".")[1]||"unknown",lastUpdated:new Date(e.updatedAt),accessRequests:0,permissions:[],activityData:[1,2,3,5,8,13,21,18,14,19,16]}))}},async createDataset(e){try{let r=await fetch("".concat(n(),"/api/v1/dataset"),{method:"POST",body:e});if(!r.ok){let e=await r.json();throw Error(e.detail||"Failed to create dataset")}return await r.json(),{success:!0,message:'Dataset "'.concat(e.get("name"),'" created successfully')}}catch(e){throw console.error("Error creating dataset:",e),e}},async getJobs(){let e=await fetch("".concat(n(),"/api/v1/jobs"));if(!e.ok)throw Error((await e.json()).detail||"Failed to fetch jobs");return{jobs:(await e.json()).jobs.map(e=>({id:e.uid,projectName:e.name,description:e.description,requestedTime:new Date(e.createdAt),requesterEmail:e.createdBy,status:s.includes(e.status)?"pending":d.includes(e.status)?"approved":"denied"}))}}}},2377:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>b});var t=a(5155),s=a(2115),d=a(7168),n=a(8482),l=a(8145),i=a(9852),o=a(2714),c=a(9946);let u=(0,c.A)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var m=a(4616),f=a(4416),p=a(7576);let x=(0,c.A)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);var h=a(1886),v=a(3999);function g(){let[e,r]=(0,s.useState)([]),[a,c]=(0,s.useState)(!0),[g,b]=(0,s.useState)(["trusted@organic.coop","researcher@university.edu"]),[y,j]=(0,s.useState)("");(0,s.useEffect)(()=>{N()},[]);let N=async()=>{try{c(!0);let e=await h.K.getJobs();r(e.jobs)}catch(e){console.error("Failed to load jobs:",e)}finally{c(!1)}},w=()=>{y&&!g.includes(y)&&(b([...g,y]),j(""))},k=e=>{b(g.filter(r=>r!==e))},A=(a,t)=>{r(e.map(e=>e.id===a?{...e,status:"approve"===t?"approved":"denied"}:e))},R=r=>e.filter(e=>e.status===r),_=e=>{switch(e){case"pending":return"border-yellow-200 bg-yellow-50 text-yellow-600 dark:border-yellow-900 dark:bg-yellow-900/30 dark:text-yellow-400 hover:bg-yellow-50 dark:hover:bg-yellow-900/30";case"approved":return"border-emerald-200 bg-emerald-50 text-emerald-600 dark:border-emerald-900 dark:bg-emerald-900/30 dark:text-emerald-400 hover:bg-emerald-50 dark:hover:bg-emerald-900/30";case"denied":return"border-red-200 bg-red-50 text-red-600 dark:border-red-900 dark:bg-red-900/30 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/30"}};return a?(0,t.jsx)("div",{className:"space-y-4",children:[void 0,void 0,void 0].map((e,r)=>(0,t.jsxs)(n.Zp,{className:"animate-pulse",children:[(0,t.jsxs)(n.aR,{children:[(0,t.jsx)("div",{className:"h-4 bg-muted rounded w-1/3"}),(0,t.jsx)("div",{className:"h-3 bg-muted rounded w-2/3"})]}),(0,t.jsx)(n.Wu,{children:(0,t.jsx)("div",{className:"h-16 bg-muted rounded"})})]},r))}):(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold",children:"Jobs"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Manage data access requests and research projects"})]}),(0,t.jsxs)(n.Zp,{children:[(0,t.jsxs)(n.aR,{children:[(0,t.jsxs)(n.ZB,{className:"flex items-center",children:[(0,t.jsx)(u,{className:"mr-2 h-5 w-5"}),"Auto-approval Settings"]}),(0,t.jsx)(n.BT,{children:"Automatically approve requests from trusted email addresses"})]}),(0,t.jsxs)(n.Wu,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex space-x-2",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)(o.J,{htmlFor:"email",children:"Add trusted email"}),(0,t.jsx)(i.p,{id:"email",type:"email",placeholder:"researcher@university.edu",value:y,onChange:e=>j(e.target.value),onKeyPress:e=>"Enter"===e.key&&w()})]}),(0,t.jsx)(d.$,{onClick:w,className:"mt-6",children:(0,t.jsx)(m.A,{className:"h-4 w-4"})})]}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:g.map((e,r)=>(0,t.jsxs)(l.E,{variant:"secondary",className:"flex items-center gap-1",children:[e,(0,t.jsx)("button",{onClick:()=>k(e),className:"ml-1 hover:text-destructive",children:(0,t.jsx)(f.A,{className:"h-3 w-3"})})]},r))})]})]}),0===e.length?(0,t.jsx)("div",{className:"text-center py-12",children:(0,t.jsxs)("div",{className:"mx-auto max-w-md",children:[(0,t.jsx)("div",{className:"mx-auto h-12 w-12 text-muted-foreground mb-4",children:(0,t.jsx)(p.A,{className:"h-12 w-12"})}),(0,t.jsx)("h3",{className:"text-lg font-medium text-foreground mb-2",children:"No jobs found"}),(0,t.jsx)("p",{className:"text-muted-foreground mb-6",children:"Jobs will appear here when researchers request access to your datasets"})]})}):["pending","approved","denied"].map(e=>{let r=R(e);return 0===r.length?null:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsxs)("h2",{className:"text-xl font-semibold capitalize",children:[e," Jobs"]}),(0,t.jsx)(l.E,{variant:"outline",children:r.length})]}),(0,t.jsx)("div",{className:"grid gap-4",children:r.map(e=>(0,t.jsxs)(n.Zp,{children:[(0,t.jsx)(n.aR,{children:(0,t.jsxs)("div",{className:"flex justify-between items-start",children:[(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)(n.ZB,{className:"text-lg",children:e.projectName}),(0,t.jsx)(n.BT,{children:e.description})]}),(0,t.jsx)(l.E,{className:_(e.status),children:e.status})]})}),(0,t.jsx)(n.Wu,{children:(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("div",{className:"space-y-1",children:(0,t.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Requested ",(0,v.f)(e.requestedTime)," by"," ",e.requesterEmail]})}),(0,t.jsx)("div",{className:"flex space-x-2",children:"pending"===e.status&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(d.$,{variant:"outline",size:"sm",onClick:()=>A(e.id,"approve"),className:"border-emerald-500 text-emerald-600 hover:bg-emerald-50 hover:text-emerald-700 dark:border-emerald-700 dark:text-emerald-400 dark:hover:bg-emerald-900/30",children:[(0,t.jsx)(x,{className:"mr-2 h-4 w-4"}),"Approve"]}),(0,t.jsxs)(d.$,{variant:"outline",size:"sm",onClick:()=>A(e.id,"deny"),className:"border-red-500 text-red-600 hover:bg-red-50 hover:text-red-700 dark:border-red-700 dark:text-red-400 dark:hover:bg-red-900/30",children:[(0,t.jsx)(f.A,{className:"mr-2 h-4 w-4"}),"Deny"]})]})})]})})]},e.id))})]},e)})]})}function b(){return(0,t.jsx)(g,{})}},2714:(e,r,a)=>{"use strict";a.d(r,{J:()=>o});var t=a(5155),s=a(2115),d=a(968),n=a(2085),l=a(3999);let i=(0,n.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=s.forwardRef((e,r)=>{let{className:a,...s}=e;return(0,t.jsx)(d.b,{ref:r,className:(0,l.cn)(i(),a),...s})});o.displayName=d.b.displayName},3655:(e,r,a)=>{"use strict";a.d(r,{hO:()=>i,sG:()=>l});var t=a(2115),s=a(7650),d=a(9708),n=a(5155),l=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce((e,r)=>{let a=t.forwardRef((e,a)=>{let{asChild:t,...s}=e,l=t?d.DX:r;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,n.jsx)(l,{...s,ref:a})});return a.displayName=`Primitive.${r}`,{...e,[r]:a}},{});function i(e,r){e&&s.flushSync(()=>e.dispatchEvent(r))}},3999:(e,r,a)=>{"use strict";a.d(r,{cn:()=>d,f:()=>n});var t=a(2596),s=a(9688);function d(){for(var e=arguments.length,r=Array(e),a=0;a<e;a++)r[a]=arguments[a];return(0,s.QP)((0,t.$)(r))}function n(e){let r=new Date,a=new Date(e),t=r.getTime()-a.getTime(),s=Math.floor(t/1e3),d=Math.floor(t/6e4),n=Math.floor(t/36e5),l=Math.floor(t/864e5);return s<60?"".concat(s," second").concat(1!==s?"s":""," ago"):d<60?"".concat(d," minute").concat(1!==d?"s":""," ago"):n<24?"".concat(n," hour").concat(1!==n?"s":""," ago"):"".concat(l," day").concat(1!==l?"s":""," ago")}},4416:(e,r,a)=>{"use strict";a.d(r,{A:()=>t});let t=(0,a(9946).A)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},4616:(e,r,a)=>{"use strict";a.d(r,{A:()=>t});let t=(0,a(9946).A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},7168:(e,r,a)=>{"use strict";a.d(r,{$:()=>o});var t=a(5155),s=a(2115),d=a(9708),n=a(2085),l=a(3999);let i=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=s.forwardRef((e,r)=>{let{className:a,variant:s,size:n,asChild:o=!1,...c}=e,u=o?d.DX:"button";return(0,t.jsx)(u,{className:(0,l.cn)(i({variant:s,size:n,className:a})),ref:r,...c})});o.displayName="Button"},7576:(e,r,a)=>{"use strict";a.d(r,{A:()=>t});let t=(0,a(9946).A)("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]])},8145:(e,r,a)=>{"use strict";a.d(r,{E:()=>l});var t=a(5155);a(2115);var s=a(2085),d=a(3999);let n=(0,s.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l(e){let{className:r,variant:a,...s}=e;return(0,t.jsx)("div",{className:(0,d.cn)(n({variant:a}),r),...s})}},8482:(e,r,a)=>{"use strict";a.d(r,{BT:()=>o,Wu:()=>c,ZB:()=>i,Zp:()=>n,aR:()=>l});var t=a(5155),s=a(2115),d=a(3999);let n=s.forwardRef((e,r)=>{let{className:a,...s}=e;return(0,t.jsx)("div",{ref:r,className:(0,d.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...s})});n.displayName="Card";let l=s.forwardRef((e,r)=>{let{className:a,...s}=e;return(0,t.jsx)("div",{ref:r,className:(0,d.cn)("flex flex-col space-y-1.5 p-6",a),...s})});l.displayName="CardHeader";let i=s.forwardRef((e,r)=>{let{className:a,...s}=e;return(0,t.jsx)("div",{ref:r,className:(0,d.cn)("text-2xl font-semibold leading-none tracking-tight",a),...s})});i.displayName="CardTitle";let o=s.forwardRef((e,r)=>{let{className:a,...s}=e;return(0,t.jsx)("div",{ref:r,className:(0,d.cn)("text-sm text-muted-foreground",a),...s})});o.displayName="CardDescription";let c=s.forwardRef((e,r)=>{let{className:a,...s}=e;return(0,t.jsx)("div",{ref:r,className:(0,d.cn)("p-6 pt-0",a),...s})});c.displayName="CardContent",s.forwardRef((e,r)=>{let{className:a,...s}=e;return(0,t.jsx)("div",{ref:r,className:(0,d.cn)("flex items-center p-6 pt-0",a),...s})}).displayName="CardFooter"},9852:(e,r,a)=>{"use strict";a.d(r,{p:()=>n});var t=a(5155),s=a(2115),d=a(3999);let n=s.forwardRef((e,r)=>{let{className:a,type:s,...n}=e;return(0,t.jsx)("input",{type:s,className:(0,d.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:r,...n})});n.displayName="Input"}},e=>{var r=r=>e(e.s=r);e.O(0,[455,441,684,358],()=>r(887)),_N_E=e.O()}]);