(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[214],{70:(e,t,a)=>{"use strict";a.d(t,{C5:()=>v,MJ:()=>g,eI:()=>f,lR:()=>p,lV:()=>c,zB:()=>m});var s=a(5155),r=a(2115),n=a(9708),i=a(2177),o=a(3999),d=a(2714),l=a(1243);let c=i.Op,u=r.createContext({}),m=e=>{let{...t}=e;return(0,s.jsx)(u.Provider,{value:{name:t.name},children:(0,s.jsx)(i.xI,{...t})})},x=()=>{let e=r.useContext(u),t=r.useContext(h),{getFieldState:a}=(0,i.xW)(),s=(0,i.lN)({name:e.name}),n=a(e.name,s);if(!e)throw Error("useFormField should be used within <FormField>");let{id:o}=t;return{id:o,name:e.name,formItemId:"".concat(o,"-form-item"),formDescriptionId:"".concat(o,"-form-item-description"),formMessageId:"".concat(o,"-form-item-message"),...n}},h=r.createContext({});function f(e){let{className:t,...a}=e,n=r.useId();return(0,s.jsx)(h.Provider,{value:{id:n},children:(0,s.jsx)("div",{"data-slot":"form-item",className:(0,o.cn)("grid gap-2",t),...a})})}function p(e){let{className:t,...a}=e,{error:r,formItemId:n}=x();return(0,s.jsx)(d.J,{"data-slot":"form-label","data-error":!!r,className:(0,o.cn)("transition data-[error=true]:text-red-500",t),htmlFor:n,...a})}function g(e){let{...t}=e,{error:a,formItemId:r,formDescriptionId:i,formMessageId:o}=x();return(0,s.jsx)(n.DX,{"data-slot":"form-control",id:r,"aria-describedby":a?"".concat(i," ").concat(o):"".concat(i),"aria-invalid":!!a,...t})}function v(e){var t;let{icon:a,className:r,...n}=e,{error:i,formMessageId:d}=x(),c=i?String(null!=(t=null==i?void 0:i.message)?t:""):n.children;return c?(0,s.jsxs)("p",{"data-slot":"form-message",id:d,className:(0,o.cn)("text-xs leading-1 text-red-500",r),...n,children:[!1===a?null:null!=a?a:(0,s.jsx)(l.A,{className:"-mt-0.5 inline size-4 stroke-[2.5]"})," ",c]}):null}},381:(e,t,a)=>{"use strict";a.d(t,{DatasetsView:()=>eZ});var s=a(5155),r=a(7777),n=a(3999);function i(e){let{data:t,className:a,chartHeightPx:i=96}=e,o=Math.max(...t);return(0,s.jsx)("div",{className:(0,n.cn)("flex w-64 items-end",a),style:{height:i},children:t.map((e,t)=>{var a,d,l;let{start:c,end:u}=(e=>{let t=new Date,a=new Date(t);a.setDate(t.getDate()-7*(11-e));let s=new Date(a);return s.setDate(a.getDate()-6),{start:s.toLocaleDateString(void 0,{month:"short",day:"numeric"}),end:a.toLocaleDateString(void 0,{month:"short",day:"numeric"})}})(t);return(0,s.jsxs)(r.m_,{delayDuration:0,children:[(0,s.jsx)(r.k$,{asChild:!0,children:(0,s.jsx)("div",{className:(0,n.cn)("flex flex-1 items-end px-0.5 brightness-100 transition hover:brightness-75 dark:hover:brightness-150"),style:{height:i},children:(0,s.jsx)("div",{className:"h-full w-full rounded-sm ".concat((e=>{switch(e){case 0:default:return"bg-muted";case 1:return"bg-green-200 dark:bg-green-900";case 2:return"bg-green-300 dark:bg-green-700";case 3:return"bg-green-400 dark:bg-green-600";case 4:return"bg-green-500 dark:bg-green-500"}})(0===e?0:e<=.25*o?1:e<=.5*o?2:e<=.75*o?3:4)),style:{height:(a=e,d=o,l=i,0===d?4:Math.max(4,a/d*l))}})})}),(0,s.jsx)(r.ZI,{children:(0,s.jsxs)("div",{className:"text-xs",children:[(0,s.jsxs)("div",{className:"font-medium",children:[e," requests"]}),(0,s.jsxs)("div",{className:"text-muted-foreground",children:[c," - ",u]})]})})]},t)})})}var o=a(2115);let d=(0,a(2085).F)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),l=o.forwardRef((e,t)=>{let{className:a,variant:r,...i}=e;return(0,s.jsx)("div",{ref:t,role:"alert",className:(0,n.cn)(d({variant:r}),a),...i})});l.displayName="Alert",o.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("h5",{ref:t,className:(0,n.cn)("mb-1 font-medium leading-none tracking-tight",a),...r})}).displayName="AlertTitle";let c=o.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("text-sm [&_p]:leading-relaxed",a),...r})});c.displayName="AlertDescription";var u=a(7649),m=a(7168);function x(e){let{...t}=e;return(0,s.jsx)(u.bL,{"data-slot":"alert-dialog",...t})}function h(e){let{...t}=e;return(0,s.jsx)(u.ZL,{"data-slot":"alert-dialog-portal",...t})}function f(e){let{className:t,...a}=e;return(0,s.jsx)(u.hJ,{"data-slot":"alert-dialog-overlay",className:(0,n.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...a})}function p(e){let{className:t,...a}=e;return(0,s.jsxs)(h,{children:[(0,s.jsx)(f,{}),(0,s.jsx)(u.UC,{"data-slot":"alert-dialog-content",className:(0,n.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",t),...a})]})}function g(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"alert-dialog-header",className:(0,n.cn)("flex flex-col gap-2 text-center sm:text-left",t),...a})}function v(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"alert-dialog-footer",className:(0,n.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",t),...a})}function j(e){let{className:t,...a}=e;return(0,s.jsx)(u.hE,{"data-slot":"alert-dialog-title",className:(0,n.cn)("text-lg font-semibold",t),...a})}function b(e){let{className:t,...a}=e;return(0,s.jsx)(u.VY,{"data-slot":"alert-dialog-description",className:(0,n.cn)("text-muted-foreground text-sm",t),...a})}function y(e){let{className:t,...a}=e;return(0,s.jsx)(u.rc,{className:(0,n.cn)((0,m.r)(),t),...a})}function N(e){let{className:t,...a}=e;return(0,s.jsx)(u.ZD,{className:(0,n.cn)((0,m.r)({variant:"outline"}),t),...a})}var w=a(8482),D=a(7489);function k(e){let{className:t,orientation:a="horizontal",decorative:r=!0,...i}=e;return(0,s.jsx)(D.b,{"data-slot":"separator",decorative:r,orientation:a,className:(0,n.cn)("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",t),...i})}var C=a(5452),S=a(4416);function A(e){let{...t}=e;return(0,s.jsx)(C.bL,{"data-slot":"sheet",...t})}function E(e){let{...t}=e;return(0,s.jsx)(C.ZL,{"data-slot":"sheet-portal",...t})}function T(e){let{className:t,...a}=e;return(0,s.jsx)(C.hJ,{"data-slot":"sheet-overlay",className:(0,n.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...a})}function _(e){let{className:t,children:a,side:r="right",...i}=e;return(0,s.jsxs)(E,{children:[(0,s.jsx)(T,{}),(0,s.jsxs)(C.UC,{"data-slot":"sheet-content",className:(0,n.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out fixed z-50 flex flex-col gap-4 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-300","right"===r&&"data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right inset-y-0 right-0 h-full w-3/4 border-l sm:max-w-sm","left"===r&&"data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left inset-y-0 left-0 h-full w-3/4 border-r sm:max-w-sm","top"===r&&"data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top inset-x-0 top-0 h-auto border-b","bottom"===r&&"data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom inset-x-0 bottom-0 h-auto border-t",t),...i,children:[a,(0,s.jsxs)(C.bm,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-secondary absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none",children:[(0,s.jsx)(S.A,{className:"size-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function z(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"sheet-header",className:(0,n.cn)("flex flex-col gap-1.5 p-4",t),...a})}function I(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"sheet-footer",className:(0,n.cn)("mt-auto flex flex-col gap-2 p-4",t),...a})}function F(e){let{className:t,...a}=e;return(0,s.jsx)(C.hE,{"data-slot":"sheet-title",className:(0,n.cn)("text-foreground font-semibold",t),...a})}function L(e){let{className:t,...a}=e;return(0,s.jsx)(C.VY,{"data-slot":"sheet-description",className:(0,n.cn)("text-muted-foreground text-sm",t),...a})}var R=a(3580),U=a(7497),$=a(6715),M=a(5041),O=a(1788),P=a(8898),q=a(2525),B=a(1243);function J(e){let{...t}=e;return(0,s.jsx)(C.bL,{"data-slot":"dialog",...t})}function Z(e){let{...t}=e;return(0,s.jsx)(C.l9,{"data-slot":"dialog-trigger",...t})}function V(e){let{...t}=e;return(0,s.jsx)(C.ZL,{"data-slot":"dialog-portal",...t})}function K(e){let{...t}=e;return(0,s.jsx)(C.bm,{"data-slot":"dialog-close",...t})}function X(e){let{className:t,...a}=e;return(0,s.jsx)(C.hJ,{"data-slot":"dialog-overlay",className:(0,n.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed -inset-1 z-50 bg-black/50","debug",t),...a})}function W(e){let{className:t,children:a,showCloseButton:r=!0,...i}=e;return(0,s.jsxs)(V,{"data-slot":"dialog-portal",children:[(0,s.jsx)(X,{}),(0,s.jsxs)(C.UC,{"data-slot":"dialog-content",className:(0,n.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",t),...i,children:[a,r&&(0,s.jsxs)(C.bm,{"data-slot":"dialog-close",className:"ring-offset-background focus-visible:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:outline-hidden focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,s.jsx)(S.A,{}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function Q(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"dialog-header",className:(0,n.cn)("flex flex-col gap-2 text-center sm:text-left",t),...a})}function G(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"dialog-footer",className:(0,n.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",t),...a})}function H(e){let{className:t,...a}=e;return(0,s.jsx)(C.hE,{"data-slot":"dialog-title",className:(0,n.cn)("text-lg leading-none font-semibold",t),...a})}function Y(e){let{className:t,...a}=e;return(0,s.jsx)(C.VY,{"data-slot":"dialog-description",className:(0,n.cn)("text-muted-foreground text-sm",t),...a})}var ee=a(70),et=a(9852);function ea(e){let{className:t,...a}=e;return(0,s.jsx)("textarea",{"data-slot":"textarea",className:(0,n.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),...a})}var es=a(1174),er=a(2235);let en=es.Ay$.object({name:es.Ay$.string().min(1,{message:"A dataset name is required"}),url:es.Ay$.string().pipe(es.Ay$.preprocess(e=>""===e||e.startsWith("https://")||e.startsWith("http://")?e:"https://"+e,es.Ay$.url({protocol:/^(https?)?$/,hostname:es.Ay$.regexes.domain,error:e=>""===e.input?"The store URL is required":void 0}))),pat:es.Ay$.string().min(1,{message:"The access token is required"}).regex(/^shpat_[0-9a-f]{32}$/,{error:()=>"Invalid access token format"}),description:es.Ay$.string().optional()}),ei=es.Ay$.object({name:es.Ay$.string().optional(),description:es.Ay$.string().optional()}),eo={async getDatasets(){let e=await er.u.get("/api/v1/datasets"),t=await U.K.getJobs(),a=t.jobs.reduce((e,t)=>{let a=e.get(t.datasetName)||[];return e.set(t.datasetName,[...a,t]),e},new Map),s=t.jobs.reduce((e,t)=>{let a=e.get(t.datasetName)||new Set;return a.add(t.requesterEmail),e.set(t.datasetName,a),e},new Map),r=t.jobs.reduce((e,t)=>{var a;let s=(a=t.requestedTime,Math.floor((new Date().getTime()-a.getTime())/6048e5));if(s>=0&&s<12){let a=e.get(t.datasetName)||Array(12).fill(0);a[11-s]++,e.set(t.datasetName,a)}return e},new Map);return{datasets:e.datasets.map(e=>{var t,i;return{uid:e.uid,name:e.name,description:e.summary,size:(0,n.z3)(e.privateSize),type:e.private.split(".").pop()||"unknown",createdAt:new Date(e.createdAt),lastUpdated:new Date(e.updatedAt),accessRequests:0,permissions:[],usersCount:(null==(t=s.get(e.name))?void 0:t.size)||0,requestsCount:(null==(i=a.get(e.name))?void 0:i.length)||0,activityData:r.get(e.name)||Array(12).fill(0),source:e.source}})}},addShopifyDataset:e=>er.u.post("/api/v1/datasets/import-from-shopify",e),updateShopifyDataset:e=>{let{uid:t,data:a}=e;return er.u.put("/api/v1/datasets/update/".concat(t),a)},syncShopifyDataset:e=>er.u.put("/api/v1/datasets/sync-shopify-dataset/".concat(e),{}),openLocalDirectory:e=>er.u.get("/api/v1/datasets/open-local-directory/".concat(e))};var ed=a(7328),el=a(221),ec=a(3717),eu=a(1154),em=a(4229),ex=a(2177);function eh(e){let{dataset:t}=e,{toast:a}=(0,R.dj)(),r=(0,$.jE)(),n=(0,ex.mN)({resolver:(0,el.u)(ei),defaultValues:{name:t.name,description:t.description}}),{setError:i}=n,o=(0,M.n)({mutationFn:eo.updateShopifyDataset,onSuccess:()=>(a({title:"Success",description:"Updated dataset"}),r.invalidateQueries({queryKey:["datasets"]})),onError:e=>{e instanceof ed.ZM&&i(e.loc,{message:e.message}),e instanceof ed.hD&&a({title:"Error",description:e.message})}}),{isPending:d}=o;return(0,s.jsxs)(J,{children:[(0,s.jsx)(Z,{asChild:!0,children:(0,s.jsxs)(m.$,{variant:"outline",className:"w-full justify-start",children:[(0,s.jsx)(ec.A,{className:"h-4 w-4"}),"Update Dataset"]})}),(0,s.jsxs)(W,{children:[(0,s.jsx)(Q,{children:(0,s.jsx)(H,{children:"Update Dataset"})}),(0,s.jsx)(ee.lV,{...n,children:(0,s.jsxs)("form",{onSubmit:n.handleSubmit(function(e){let a={...e,name:e.name!==t.name?e.name:void 0,description:e.description!==t.description?e.description:void 0};o.mutate({uid:t.uid,data:a})}),className:"flex flex-col gap-5",children:[(0,s.jsx)(ee.zB,{name:"name",render:e=>{let{field:a}=e;return(0,s.jsxs)(ee.eI,{children:[(0,s.jsxs)("div",{className:"relative w-full",children:[(0,s.jsx)(ee.lR,{children:"Dataset Name"}),(0,s.jsx)(ee.C5,{className:"absolute top-1 right-0"})]}),(0,s.jsx)(ee.MJ,{children:(0,s.jsx)(et.p,{placeholder:t.name,...a})})]})}}),(0,s.jsx)(ee.zB,{name:"description",render:e=>{let{field:a}=e;return(0,s.jsxs)(ee.eI,{children:[(0,s.jsxs)("div",{className:"relative w-full",children:[(0,s.jsx)(ee.lR,{children:"Description"}),(0,s.jsx)(ee.C5,{className:"absolute top-1 right-0"})]}),(0,s.jsx)(ee.MJ,{children:(0,s.jsx)(ea,{placeholder:t.name,...a})})]})}}),(0,s.jsxs)(G,{children:[(0,s.jsx)(K,{asChild:!0,children:(0,s.jsx)(m.$,{type:"button",variant:"outline",onClick:()=>{n.reset()},disabled:d,children:"Cancel"})}),(0,s.jsx)(m.$,{type:"submit",disabled:d,children:d?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(eu.A,{className:"h-4 w-4 animate-spin"}),"Saving..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(em.A,{className:"h-4 w-4"}),"Save Change"]})})]})]})})]})]})}function ef(e){let{dataset:t,open:a,onOpenChange:r}=e,{toast:n}=(0,R.dj)(),[d,u]=(0,o.useState)(!1),[h,f]=(0,o.useState)(""),[D,C]=(0,o.useState)(!1),S=(0,$.jE)(),E=(0,M.n)({mutationFn:e=>{let{datasetName:t}=e;return U.K.deleteDataset(t)},onError:e=>{console.error(e)},onSuccess:()=>{S.invalidateQueries({queryKey:["datasets"]}),r(!1),n({title:"Success",description:"Removed dataset"})}}),T=async()=>{if(t){u(!0),f("");try{let e=await U.K.downloadDatasetPrivate(t.uid),a=await e.blob(),s=window.URL.createObjectURL(a),i=document.createElement("a");i.href=s;let o=e.headers.get("Content-Disposition"),d=null==o?void 0:o.match(/filename="(.+)"/);i.download=d?d[1]:"".concat(t.name,".csv"),document.body.appendChild(i),i.click(),window.URL.revokeObjectURL(s),document.body.removeChild(i),n({title:"Success",description:"Dataset downloaded successfully"}),r(!1)}catch(e){f(e instanceof Error?e.message:"Failed to download dataset")}finally{u(!1)}}};return t?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(A,{open:a,onOpenChange:r,children:(0,s.jsxs)(_,{className:"scrollbar-thin overflow-y-auto",children:[(0,s.jsxs)(z,{children:[(0,s.jsx)(F,{className:"text-2xl",children:t.name}),(0,s.jsx)(L,{children:t.description})]}),(0,s.jsxs)("div",{className:"flex-1",children:[h&&(0,s.jsx)(l,{variant:"destructive",className:"mb-4",children:(0,s.jsx)(c,{className:"break-all",children:h})}),(0,s.jsxs)("div",{className:"flex flex-col gap-4 px-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("div",{className:"text-muted-foreground",children:"Format"}),(0,s.jsx)("div",{className:"font-medium",children:t.type.toUpperCase()})]}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("div",{className:"text-muted-foreground",children:"Size"}),(0,s.jsx)("div",{className:"font-medium",children:t.size})]}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("div",{className:"text-muted-foreground",children:"Created"}),(0,s.jsx)("div",{className:"font-medium",children:new Date(t.createdAt).toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"})})]}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("div",{className:"text-muted-foreground",children:"Last Updated"}),(0,s.jsx)("div",{className:"font-medium",children:new Date(t.lastUpdated).toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"})})]})]}),(0,s.jsxs)(w.Zp,{children:[(0,s.jsx)(w.aR,{className:"pb-3",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)(w.ZB,{className:"text-sm font-medium",children:"Activity Overview"}),(0,s.jsx)("div",{className:"text-muted-foreground text-xs",children:"Last 12 weeks"})]})}),(0,s.jsxs)(w.Wu,{children:[(0,s.jsx)(i,{data:t.activityData,className:"w-full",chartHeightPx:128}),(0,s.jsxs)("div",{className:"text-muted-foreground mt-4 flex items-center justify-between text-xs",children:[(0,s.jsx)("div",{children:"Total Requests: 1"}),(0,s.jsx)("div",{children:"Avg: 0/week"})]})]})]})]})]}),(0,s.jsxs)(I,{children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("h3",{className:"text-sm font-medium",children:"Actions"}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)(m.$,{variant:"outline",className:"w-full justify-start",onClick:T,disabled:d,children:[(0,s.jsx)(O.A,{className:"h-4 w-4"}),"Download Dataset"]}),(0,s.jsxs)(m.$,{variant:"outline",className:"w-full justify-start",onClick:()=>eo.openLocalDirectory(t.uid),children:[(0,s.jsx)(P.A,{}),"View Dataset"]}),(0,s.jsx)(eh,{dataset:t}),(0,s.jsxs)(m.$,{variant:"outline",className:"w-full justify-start text-red-600 hover:bg-red-50 hover:text-red-700",onClick:()=>C(!0),disabled:d,children:[(0,s.jsx)(q.A,{className:"h-4 w-4"}),"Delete Dataset"]})]})]}),(0,s.jsx)(k,{className:"my-2"}),(0,s.jsx)(m.$,{variant:"outline",onClick:()=>r(!1),className:"w-full",children:"Close"})]})]})}),(0,s.jsx)(x,{open:D,onOpenChange:C,children:(0,s.jsxs)(p,{children:[(0,s.jsxs)(g,{children:[(0,s.jsxs)(j,{className:"flex items-center gap-2",children:[(0,s.jsx)(B.A,{className:"h-5 w-5 text-red-500"}),"Delete Dataset"]}),(0,s.jsxs)(b,{children:["Are you sure you want to delete"," ",(0,s.jsx)("span",{className:"font-semibold",children:t.name}),"? This action cannot be undone."]})]}),(0,s.jsxs)(v,{children:[(0,s.jsx)(N,{children:"Cancel"}),(0,s.jsx)(y,{onClick:()=>t&&E.mutate({datasetName:t.name}),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete"})]})]})})]}):null}var ep=a(7737),eg=a(2960),ev=a(4213),ej=a(8145),eb=a(5112),ey=a(7580),eN=a(2713),ew=a(9074),eD=a(5880),ek=a(3904),eC=a(4315);function eS(e){let{children:t,className:a,...r}=e;return(0,s.jsx)("div",{...r,className:(0,n.cn)("flex cursor-default items-center gap-1.5 space-x-1 whitespace-nowrap rounded-sm bg-transparent px-2 py-0.5 text-sm text-muted-foreground transition-colors hover:bg-muted hover:text-foreground [&>svg]:pointer-events-none [&>svg]:mb-px [&>svg]:size-4",a),children:t})}function eA(e){var t,a;let{dataset:o,onSelect:d}=e;return(0,s.jsx)(w.Zp,{children:(0,s.jsxs)(w.Wu,{className:"flex justify-between p-6",children:[(0,s.jsxs)("div",{className:"flex flex-1 flex-col justify-between gap-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"mb-1 flex items-center gap-3",children:[(0,s.jsx)("h3",{className:"cursor-pointer text-xl font-semibold text-blue-600 hover:underline",onClick:d,children:o.name}),(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsxs)(r.m_,{children:[(0,s.jsx)(r.k$,{asChild:!0,children:(0,s.jsxs)(ej.E,{variant:"secondary",className:"cursor-default gap-2 bg-green-100 text-green-800 transition-colors hover:bg-green-200 hover:text-green-900 dark:bg-green-900 dark:text-green-300 dark:hover:bg-green-800 dark:hover:text-green-100",children:[(0,s.jsx)(eb.A,{size:12})," ",o.type.toUpperCase()]})}),(0,s.jsxs)(r.ZI,{children:["Dataset format: ",o.type.toUpperCase()]})]}),(null==(t=o.source)?void 0:t.type)==="shopify"?(0,s.jsxs)(r.m_,{children:[(0,s.jsx)(r.k$,{asChild:!0,children:(0,s.jsxs)(ej.E,{variant:"outline",className:"hover:bg-muted dark:hover:bg-muted cursor-default gap-2 transition-colors",children:[(0,s.jsx)(eC.M2,{size:14})," Shopify"]})}),(0,s.jsx)(r.ZI,{children:"Dataset linked from Shopify"})]}):null]})]}),(0,s.jsx)(w.BT,{className:"text-muted-foreground text-sm",children:o.description})]}),(0,s.jsxs)("div",{className:"-mb-1 -ml-2 flex flex-wrap gap-1",children:[(0,s.jsxs)(r.m_,{children:[(0,s.jsx)(r.k$,{asChild:!0,children:(0,s.jsxs)(eS,{children:[(0,s.jsx)(ey.A,{className:"h-4 w-4 shrink-0"}),"".concat(o.usersCount," ").concat(1===o.usersCount?"user":"users")]})}),(0,s.jsxs)(r.ZI,{collisionPadding:8,children:[o.usersCount," ",1===o.usersCount?"user has":"users have"," requested access to this dataset"]})]}),(0,s.jsxs)(r.m_,{children:[(0,s.jsx)(r.k$,{asChild:!0,children:(0,s.jsxs)(eS,{children:[(0,s.jsx)(eN.A,{className:"h-4 w-4 shrink-0"}),o.requestsCount," requests"]})}),(0,s.jsxs)(r.ZI,{children:[o.requestsCount," total access",1===o.requestsCount?" request":" requests"]})]}),(0,s.jsxs)(r.m_,{children:[(0,s.jsx)(r.k$,{asChild:!0,children:(0,s.jsxs)(eS,{children:[(0,s.jsx)(ew.A,{className:"h-4 w-4 shrink-0"}),"Updated ",(0,n.fF)(o.lastUpdated.toISOString())]})}),(0,s.jsxs)(r.ZI,{children:["Last updated on"," ",o.lastUpdated.toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})]})]}),(0,s.jsxs)(r.m_,{children:[(0,s.jsx)(r.k$,{asChild:!0,children:(0,s.jsxs)(eS,{children:[(0,s.jsx)(eD.A,{className:"h-4 w-4 shrink-0"}),o.size]})}),(0,s.jsxs)(r.ZI,{children:["The dataset is ",o.size," in size"]})]})]}),o.permissions.length>0?(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:o.permissions.map((e,t)=>(0,s.jsx)(ej.E,{variant:"outline",className:"bg-muted text-xs",children:e},t))}):null]}),(0,s.jsx)("div",{className:"mr-2 flex flex-col justify-end",children:(null==(a=o.source)?void 0:a.type)==="shopify"?(0,s.jsx)(eE,{dataset:o}):null}),(0,s.jsx)(i,{data:o.activityData})]})})}function eE(e){let{dataset:t}=e,{toast:a}=(0,R.dj)(),r=(0,$.jE)(),n=(0,o.useRef)(null),i=(0,M.n)({mutationFn:eo.syncShopifyDataset,onSuccess:()=>{a({title:"Success",description:"Dataset synced successfully."})},onSettled:()=>(n.current&&(n.current.style.animationIterationCount="1"),r.invalidateQueries({queryKey:["datasets"]}))}),{isPending:d}=i;return(0,s.jsxs)(m.$,{size:"sm",variant:"outline",onClick:()=>{(()=>{let e=n.current;if(!e)return;e.classList.remove("animate-spin"),e.offsetHeight,e.style.animationIterationCount="infinite",e.classList.add("animate-spin");let t=()=>{e.classList.remove("animate-spin"),e.removeEventListener("animationend",t)};e.addEventListener("animationend",t)})(),i.mutate(t.uid)},disabled:d,children:[(0,s.jsx)("span",{ref:n,className:"inline-flex duration-500",children:(0,s.jsx)(ek.A,{})}),"Sync"]})}var eT=a(9449);function e_(e){let{...t}=e;return(0,s.jsx)(eT.bL,{"data-slot":"dropdown-menu",...t})}function ez(e){let{...t}=e;return(0,s.jsx)(eT.l9,{"data-slot":"dropdown-menu-trigger",...t})}function eI(e){let{className:t,sideOffset:a=4,...r}=e;return(0,s.jsx)(eT.ZL,{children:(0,s.jsx)(eT.UC,{"data-slot":"dropdown-menu-content",sideOffset:a,className:(0,n.cn)("max-h-(--radix-dropdown-menu-content-available-height) origin-(--radix-dropdown-menu-content-transform-origin) z-50 min-w-32 overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r})})}function eF(e){let{className:t,inset:a,variant:r="default",...i}=e;return(0,s.jsx)(eT.q7,{"data-slot":"dropdown-menu-item","data-inset":a,"data-variant":r,className:(0,n.cn)("[svg]:*:data-[variant=destructive]:text-destructive! outline-hidden relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm focus:bg-accent focus:text-accent-foreground data-disabled:pointer-events-none data-inset:pl-8 data-[variant=destructive]:text-destructive data-disabled:opacity-50 data-[variant=destructive]:focus:bg-destructive/10 data-[variant=destructive]:focus:text-destructive dark:data-[variant=destructive]:focus:bg-destructive/20 [&_svg:not([class*='size-'])]:size-4 [&_svg:not([class*='text-'])]:text-muted-foreground [&_svg]:pointer-events-none [&_svg]:shrink-0",t),...i})}var eL=a(4616),eR=a(2148),eU=a(3837);function e$(e){let{open:t,onOpenChange:a}=e,{toast:r}=(0,R.dj)(),n=(0,$.jE)(),i=(0,ex.mN)({resolver:(0,el.u)(en),defaultValues:{name:"",url:"",pat:"",description:""}}),{setError:o}=i,d=(0,M.n)({mutationFn:eo.addShopifyDataset,onError:e=>{e instanceof ed.ZM&&o(e.loc,{message:e.message}),e instanceof ed.hD&&r({title:"Error",description:e.message})},onSuccess:()=>(a(!1),i.reset(),r({title:"Success",description:"Added a new dataset from Shopify"}),n.invalidateQueries({queryKey:["datasets"]}))}),{isPending:l}=d;return(0,s.jsx)(J,{open:t,onOpenChange:a,children:(0,s.jsxs)(W,{className:"sm:max-w-md",children:[(0,s.jsx)(Q,{children:(0,s.jsx)(H,{children:"Import data from your Shopify store"})}),(0,s.jsx)(ee.lV,{...i,children:(0,s.jsxs)("form",{onSubmit:i.handleSubmit(function(e){d.mutate(e)}),className:"flex flex-col gap-5",children:[(0,s.jsx)(ee.zB,{name:"name",render:e=>{let{field:t}=e;return(0,s.jsxs)(ee.eI,{children:[(0,s.jsxs)("div",{className:"relative w-full",children:[(0,s.jsx)(ee.lR,{children:"Dataset Name *"}),(0,s.jsx)(ee.C5,{className:"absolute top-1 right-0"})]}),(0,s.jsx)(ee.MJ,{children:(0,s.jsx)(et.p,{placeholder:"shopify_data",...t})})]})}}),(0,s.jsx)(ee.zB,{name:"description",render:e=>{let{field:t}=e;return(0,s.jsxs)(ee.eI,{children:[(0,s.jsx)(ee.lR,{children:"Description (optional)"}),(0,s.jsx)(ee.MJ,{children:(0,s.jsx)(ea,{placeholder:"Data from ...",...t})})]})}}),(0,s.jsx)(ee.zB,{name:"url",render:e=>{let{field:t}=e;return(0,s.jsxs)(ee.eI,{children:[(0,s.jsxs)("div",{className:"relative w-full",children:[(0,s.jsx)(ee.lR,{children:"Shopify Store URL *"}),(0,s.jsx)(ee.C5,{className:"absolute top-1 right-0"})]}),(0,s.jsx)(ee.MJ,{children:(0,s.jsx)(et.p,{placeholder:"https://your-store.com",...t})})]})}}),(0,s.jsx)(ee.zB,{name:"pat",render:e=>{let{field:t}=e;return(0,s.jsxs)(ee.eI,{children:[(0,s.jsxs)("div",{className:"relative w-full",children:[(0,s.jsx)(ee.lR,{children:"Access Token *"}),(0,s.jsx)(ee.C5,{className:"absolute top-1 right-0"})]}),(0,s.jsx)(ee.MJ,{children:(0,s.jsx)(et.p,{placeholder:"shpat_123...",...t})})]})}}),(0,s.jsxs)(G,{children:[(0,s.jsx)(m.$,{type:"button",variant:"outline",onClick:()=>{a(!1),i.reset()},disabled:l,children:"Cancel"}),(0,s.jsx)(m.$,{type:"submit",disabled:l,children:l?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(eu.A,{className:"h-4 w-4 animate-spin"}),"Importing..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(eU.A,{className:"h-4 w-4"}),"Import"]})})]})]})})]})})}var eM=a(2714),eO=a(4395),eP=a(9869),eq=a(4331);function eB(e){let{open:t,onOpenChange:a,onSuccess:r}=e,{toast:n}=(0,R.dj)(),[i,d]=(0,o.useState)(null),[u,x]=(0,o.useState)(""),[h,f]=(0,o.useState)(""),[p,g]=(0,o.useState)(!1),[v,j]=(0,o.useState)(""),{isDragging:b,activeDropZone:y,handleDragEnter:N,handleDragLeave:w,handleDragOver:D,handleDrop:k}=(0,eq.J)(),C=(0,$.jE)(),S=(0,M.n)({mutationFn:U.K.createDataset,onSuccess:e=>{C.invalidateQueries({queryKey:["datasets"]}),n({title:"Success",description:e.message}),null==r||r()}}),A=e=>{k(e,"create-dataset",e=>{d(e),x(e.name.replace(/\.[^/.]+$/,""))})},E=async e=>{if(e.preventDefault(),!i)return void j("Please select a file");if(!u.trim())return void j("Please enter a dataset name");g(!0),j("");try{let e=new FormData;e.append("dataset",i),e.append("name",u.trim()),e.append("description",h.trim()||""),S.mutate(e)}catch(e){j(e instanceof Error?e.message:"Failed to create dataset")}finally{g(!1)}},T=e=>{e||p||(d(null),x(""),f(""),j(""),g(!1)),a(e)};return(0,s.jsx)(J,{open:t,onOpenChange:T,children:(0,s.jsxs)(W,{className:"sm:max-w-md",onDragEnter:e=>N(e,"create-dataset"),onDragLeave:e=>w(e,"create-dataset"),onDragOver:e=>D(e,"create-dataset"),onDrop:A,children:[(0,s.jsxs)(Q,{children:[(0,s.jsx)(H,{children:"Create New Dataset"}),(0,s.jsx)(Y,{children:"Get started by uploading your dataset file."})]}),(0,s.jsxs)("form",{onSubmit:E,className:"space-y-4",onDragEnter:e=>N(e,"create-dataset"),onDragLeave:e=>w(e,"create-dataset"),onDragOver:e=>D(e,"create-dataset"),onDrop:A,children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(eM.J,{htmlFor:"dataset-file",children:"Dataset File *"}),(0,s.jsxs)("div",{className:"relative rounded-lg border-2 border-dashed p-6 text-center transition-colors ".concat("create-dataset"===y&&b?"border-primary bg-primary/5":"border-muted-foreground/25 hover:border-muted-foreground/50"),children:[(0,s.jsx)("input",{id:"dataset-file",type:"file",onChange:e=>{let t=e.target.files;if(t&&t.length>0){d(t[0]);let e=t[0];e.webkitRelativePath?x(e.webkitRelativePath.split("/")[0]):x(e.name.replace(/\.[^/.]+$/,""))}},className:"hidden"}),(0,s.jsx)("label",{htmlFor:"dataset-file",className:"block cursor-pointer",children:(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(eO.A,{className:"mx-auto h-8 w-8 text-muted-foreground"}),(0,s.jsxs)("div",{className:"text-sm",children:[(0,s.jsx)("span",{className:"font-medium text-primary hover:underline",children:"create-dataset"===y&&b?"Drop your file here":"Drop your file here or click to select"}),(0,s.jsx)("p",{className:"mt-1 text-muted-foreground",children:"Choose your dataset file"})]})]})})]}),i&&(0,s.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Selected: ",i.name]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(eM.J,{htmlFor:"name",children:"Dataset Name *"}),(0,s.jsx)(et.p,{id:"name",value:u,onChange:e=>x(e.target.value),placeholder:"Enter dataset name",required:!0})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(eM.J,{htmlFor:"description",children:"Description (optional)"}),(0,s.jsx)(et.p,{id:"description",value:h,onChange:e=>f(e.target.value),placeholder:"Brief description of the dataset"})]}),v&&(0,s.jsx)(l,{variant:"destructive",children:(0,s.jsx)(c,{className:"break-all",children:v})}),(0,s.jsxs)(G,{children:[(0,s.jsx)(m.$,{type:"button",variant:"outline",onClick:()=>T(!1),disabled:p,children:"Cancel"}),(0,s.jsx)(m.$,{type:"submit",disabled:p,children:p?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(eu.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Uploading..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(eP.A,{className:"mr-2 h-4 w-4"}),"Create Dataset"]})})]})]})]})})}function eJ(){let[e,t]=(0,o.useState)(!1),[a,r]=(0,o.useState)(!1);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(e_,{children:[(0,s.jsx)(ez,{asChild:!0,children:(0,s.jsxs)(m.$,{size:"sm",children:[(0,s.jsx)(eL.A,{}),"Add a Dataset"]})}),(0,s.jsxs)(eI,{align:"end",children:[(0,s.jsxs)(eF,{className:"cursor-pointer px-3",onSelect:()=>r(!0),children:[(0,s.jsx)(eR.A,{className:"size-4"}),"Add from a local file"]}),(0,s.jsxs)(eF,{className:"cursor-pointer px-3",onSelect:()=>t(!0),children:[(0,s.jsx)(eC.M2,{className:"size-4"}),"Import from Shopify"]})]})]}),(0,s.jsx)(e$,{open:e,onOpenChange:t}),(0,s.jsx)(eB,{open:a,onOpenChange:r,onSuccess:()=>r(!1)})]})}function eZ(){let[e,t]=(0,o.useState)(null),[a,r]=(0,o.useState)(!1),{isPending:n,data:i}=(0,eg.I)({queryKey:["datasets"],queryFn:()=>eo.getDatasets()});return(0,o.useEffect)(()=>{if(!e||!i)return;let a=i.datasets.find(t=>t.uid===e.uid);a&&t(a)},[i]),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold",children:"Datasets"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Manage your cooperative's data assets"})]}),(0,s.jsx)(eJ,{})]}),n||!i?(0,s.jsx)(eV,{}):(0,s.jsx)("div",{className:"space-y-4",children:0===i.datasets.length?(0,s.jsxs)("div",{className:"mx-auto flex h-96 max-w-md flex-col items-center justify-center",children:[(0,s.jsx)(ev.A,{className:"text-muted-foreground mb-6 size-16",strokeWidth:1.5}),(0,s.jsx)("h3",{className:"text-foreground text-lg font-medium",children:"No datasets found"}),(0,s.jsx)("p",{className:"text-muted-foreground mb-6",children:"Add a new dataset to get started"})]}):i.datasets.map(e=>(0,s.jsx)(eA,{dataset:e,onSelect:()=>{t(e),r(!0)}},e.uid))}),(0,s.jsx)(ef,{dataset:e,open:a,onOpenChange:()=>{r(!1),setTimeout(()=>t(null),350)}})]})}function eV(){return(0,s.jsx)("div",{className:"space-y-4",children:[void 0,void 0,void 0].map((e,t)=>(0,s.jsx)(w.Zp,{children:(0,s.jsxs)(w.Wu,{className:"flex justify-between p-6",children:[(0,s.jsxs)("div",{className:"flex w-2/3 flex-col justify-between gap-1",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(ep.E,{className:"bg-muted h-6 w-1/3 rounded"}),(0,s.jsx)(ep.E,{className:"bg-muted h-4 w-2/3 rounded"})]}),(0,s.jsxs)("div",{className:"flex h-4 gap-2",children:[(0,s.jsx)(ep.E,{className:"h-full w-20"}),(0,s.jsx)(ep.E,{className:"h-full w-20"}),(0,s.jsx)(ep.E,{className:"h-full w-48"}),(0,s.jsx)(ep.E,{className:"h-full w-20"})]})]}),(0,s.jsx)(ep.E,{className:"bg-muted h-24 w-64 rounded"})]})},t))})}},2235:(e,t,a)=>{"use strict";a.d(t,{u:()=>i});var s=a(7328);let r=a(9509).env.NEXT_PUBLIC_API_URL||"";class n{async request(e,t){let a="".concat(r).concat(e),n={...t,headers:{"Content-Type":"application/json",...null==t?void 0:t.headers}},i=await fetch(a,n);if(i.ok)return i.json();throw await (0,s.xy)(i)}get(e){return this.request(e)}post(e,t){return this.request(e,{method:"POST",body:JSON.stringify(t)})}put(e,t){return this.request(e,{method:"PUT",body:JSON.stringify(t)})}}let i=new n},2714:(e,t,a)=>{"use strict";a.d(t,{J:()=>i});var s=a(5155);a(2115);var r=a(968),n=a(3999);function i(e){let{className:t,...a}=e;return(0,s.jsx)(r.b,{"data-slot":"label",className:(0,n.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",t),...a})}},3580:(e,t,a)=>{"use strict";a.d(t,{dj:()=>u});var s=a(2115);let r=0,n=new Map,i=e=>{if(n.has(e))return;let t=setTimeout(()=>{n.delete(e),l({type:"REMOVE_TOAST",toastId:e})},1e6);n.set(e,t)},o=[],d={toasts:[]};function l(e){d=((e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:a}=t;return a?i(a):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===a||void 0===a?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}})(d,e),o.forEach(e=>{e(d)})}function c(e){let{...t}=e,a=(r=(r+1)%Number.MAX_SAFE_INTEGER).toString(),s=()=>l({type:"DISMISS_TOAST",toastId:a});return l({type:"ADD_TOAST",toast:{...t,id:a,open:!0,onOpenChange:e=>{e||s()}}}),{id:a,dismiss:s,update:e=>l({type:"UPDATE_TOAST",toast:{...e,id:a}})}}function u(){let[e,t]=s.useState(d);return s.useEffect(()=>(o.push(t),()=>{let e=o.indexOf(t);e>-1&&o.splice(e,1)}),[e]),{...e,toast:c,dismiss:e=>l({type:"DISMISS_TOAST",toastId:e})}}},3999:(e,t,a)=>{"use strict";a.d(t,{cn:()=>n,fF:()=>o,z3:()=>i});var s=a(2596),r=a(9688);function n(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,r.QP)((0,s.$)(t))}let i=e=>{if(0===e)return"0 B";let t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["B","KB","MB","GB","TB"][t]};function o(e){let t=new Date,a=new Date(e),s=t.getTime()-a.getTime(),r=Math.floor(s/1e3),n=Math.floor(s/6e4),i=Math.floor(s/36e5),o=Math.floor(s/864e5);return r<60?"".concat(r," second").concat(1!==r?"s":""," ago"):n<60?"".concat(n," minute").concat(1!==n?"s":""," ago"):i<24?"".concat(i," hour").concat(1!==i?"s":""," ago"):"".concat(o," day").concat(1!==o?"s":""," ago")}},4331:(e,t,a)=>{"use strict";a.d(t,{J:()=>i,X:()=>o});var s=a(5155),r=a(2115);let n=(0,r.createContext)(null);function i(){let e=(0,r.useContext)(n);if(!e)throw Error("useDragDrop must be used within a DragDropProvider");return e}function o(e){let{children:t}=e,[a,i]=(0,r.useState)(!1),[o,d]=(0,r.useState)(null),l=(0,r.useCallback)((e,t)=>{e.preventDefault(),e.stopPropagation(),i(!0),d(t)},[]),c=(0,r.useCallback)((e,t)=>{e.preventDefault(),e.stopPropagation(),o===t&&(i(!1),d(null))},[o]),u=(0,r.useCallback)((e,t)=>{e.preventDefault(),e.stopPropagation(),i(!0),d(t)},[]),m=(0,r.useCallback)((e,t,a)=>{e.preventDefault(),e.stopPropagation(),i(!1),d(null);let s=e.dataTransfer.files;s&&s.length>0&&a(s[0])},[]);return(0,s.jsx)(n.Provider,{value:{isDragging:a,activeDropZone:o,setActiveDropZone:d,handleDragEnter:l,handleDragLeave:c,handleDragOver:u,handleDrop:m},children:t})}},7168:(e,t,a)=>{"use strict";a.d(t,{$:()=>d,r:()=>o});var s=a(5155);a(2115);var r=a(9708),n=a(2085),i=a(3999);let o=(0,n.F)("cursor-pointer inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-2xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function d(e){let{className:t,variant:a,size:n,asChild:d=!1,...l}=e,c=d?r.DX:"button";return(0,s.jsx)(c,{"data-slot":"button",className:(0,i.cn)(o({variant:a,size:n,className:t})),...l})}},7328:(e,t,a)=>{"use strict";a.d(t,{ZM:()=>s,hD:()=>r,xy:()=>n});class s extends Error{constructor(e,t){super(e),this.name="FormFieldError",this.loc=t,this.message=e,Error.captureStackTrace&&Error.captureStackTrace(this,s)}}class r extends Error{constructor(e,t,a){super(e),this.name="ApiError",this.status=t,this.statusText=a,Error.captureStackTrace&&Error.captureStackTrace(this,r)}}async function n(e){let t=e.headers.get("content-type");if(!(null==t?void 0:t.includes("application/json")))return new r(await e.text()||"".concat(e.status," ").concat(e.statusText),e.status,e.statusText);try{let t=await e.json();if("FormFieldError"===t.detail.type){let e=t.detail.message,a=t.detail.loc;return new s(e,a)}let a=JSON.stringify(t);return new r(a,e.status,e.statusText)}catch(t){return new r("".concat(e.status," ").concat(e.statusText),e.status,e.statusText)}}},7497:(e,t,a)=>{"use strict";a.d(t,{K:()=>n});var s=a(9509);let r={pending_code_review:"pending",job_run_failed:"pending",job_run_finished:"approved",approved:"approved",shared:"approved",rejected:"denied"},n={async createDataset(e){try{let t=await fetch("".concat(s.env.NEXT_PUBLIC_API_URL||"","/api/v1/datasets/create-from-file"),{method:"POST",body:e});if(!t.ok){let e=await t.json();throw Error(e.detail||"Failed to create dataset")}return await t.json(),{success:!0,message:'Dataset "'.concat(e.get("name"),'" created successfully')}}catch(e){throw console.error("Error creating dataset:",e),e}},async getJobs(){let e=await fetch("".concat(s.env.NEXT_PUBLIC_API_URL||"","/api/v1/jobs"));if(!e.ok)throw Error((await e.json()).detail||"Failed to fetch jobs");return{jobs:(await e.json()).jobs.map(e=>({uid:e.uid,datasetName:e.datasetName,projectName:e.name,description:e.description,requestedTime:new Date(e.createdAt),requesterEmail:e.createdBy,status:r[e.status]}))}},async deleteDataset(e){let t=await fetch("".concat(s.env.NEXT_PUBLIC_API_URL||"","/api/v1/datasets/").concat(encodeURIComponent(e)),{method:"DELETE"});if(!t.ok)throw Error((await t.json()).detail||"Failed to delete dataset");return await t.json()},async downloadDatasetPrivate(e){let t=await fetch("".concat(s.env.NEXT_PUBLIC_API_URL||"","/api/v1/datasets/").concat(e,"/private"),{method:"GET"});if(!t.ok)throw Error((await t.json()).detail||"Failed to download dataset");return t}}},7737:(e,t,a)=>{"use strict";a.d(t,{E:()=>n});var s=a(5155),r=a(3999);function n(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"skeleton",className:(0,r.cn)("bg-accent animate-pulse rounded-md",t),...a})}},7777:(e,t,a)=>{"use strict";a.d(t,{Bc:()=>o,ZI:()=>c,k$:()=>l,m_:()=>d});var s=a(5155),r=a(2115),n=a(9613),i=a(3999);let o=n.Kq,d=n.bL,l=n.l9,c=r.forwardRef((e,t)=>{let{className:a,sideOffset:r=4,...o}=e;return(0,s.jsx)(n.UC,{ref:t,sideOffset:r,className:(0,i.cn)("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...o})});c.displayName=n.UC.displayName},8145:(e,t,a)=>{"use strict";a.d(t,{E:()=>d});var s=a(5155);a(2115);var r=a(9708),n=a(2085),i=a(3999);let o=(0,n.F)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function d(e){let{className:t,variant:a,asChild:n=!1,...d}=e,l=n?r.DX:"span";return(0,s.jsx)(l,{"data-slot":"badge",className:(0,i.cn)(o({variant:a}),t),...d})}},8482:(e,t,a)=>{"use strict";a.d(t,{BT:()=>l,Wu:()=>c,ZB:()=>d,Zp:()=>i,aR:()=>o});var s=a(5155),r=a(2115),n=a(3999);let i=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-xs",a),...r})});i.displayName="Card";let o=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",a),...r})});o.displayName="CardHeader";let d=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",a),...r})});d.displayName="CardTitle";let l=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",a),...r})});l.displayName="CardDescription";let c=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",a),...r})});c.displayName="CardContent",r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",a),...r})}).displayName="CardFooter"},8998:(e,t,a)=>{Promise.resolve().then(a.bind(a,381))},9852:(e,t,a)=>{"use strict";a.d(t,{p:()=>i});var s=a(5155),r=a(2115),n=a(3999);let i=r.forwardRef((e,t)=>{let{className:a,type:r,...i}=e;return(0,s.jsx)("input",{type:r,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-hidden focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:t,...i})});i.displayName="Input"}},e=>{e.O(0,[446,812,321,998,922,441,964,358],()=>e(e.s=8998)),_N_E=e.O()}]);